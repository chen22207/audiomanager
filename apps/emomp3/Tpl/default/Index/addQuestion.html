<include file="../Public/public_header" />

1.<script type="text/javascript">

    var i = 1;
    var putQuestion = new Array();


    function Publish()
    {
        var url = $("#PublishProblem").attr('url');
        var audioid = $("#PublishProblem").attr('audioid');
        $.post(url, {audioid:audioid, problems:putQuestion}, function(a,b,c){
            handleajax(a);
        });
    }

    function CreateQuestion()
    {
        if(document.getElementById("select").value == "1")
        {
            setLabelQuestion();
        }
        else
        {
            setOptionQuestion();
        }
    }

    function setLabelQuestion()
    {
        var AddLabel = "<tr><td> 请为此题添加标签</td><td>标签题 </td><td>请为此题添加标签 </td></tr>";
        $("#questionTable tbody").append(AddLabel);

        var PutLabel = "{\"type\":\"tag\",\"problem\":\"请给这段音频的情绪打标签\"}";

        putQuestion.push(JSON.parse(PutLabel));
        i++;
    }

    function setOptionQuestion()
    {
        var options = "";
        var k = 1;
        var choices = new Array();

        var OptionTitle = document.getElementById("title").value;
        for(var j = 1 ; j <= 6 ;j ++)
        {
            if(document.getElementById("option"+ j.toString()).value != "")
            {
                options = options + "选项"+ k.toString() + document.getElementById("option"+ j.toString()).value+"  ";

                choices.push(document.getElementById("option"+ j.toString()).value);

                k++;
            }
        }

        var AddOptionContent = "<tr><td>"+OptionTitle+" </td><td>选择题 </td><td>"+options+" </td></tr>"

        $("#questionTable tbody").append(AddOptionContent);

        var choice = "[\""+ choices.join("\",\"")+"\"]";

        var putOptionContent = "{\"type\":\"choice\",\"problem\":\""+OptionTitle+"\",\"choices\":"+ choice+"}";

        putQuestion.push(JSON.parse(putOptionContent));

        i++;
    }

    function setDisplay()
    {
        if(document.getElementById("select").value == "1")
        {
            display("1");
        }
        else
        {
            display("2");
        }
    }

    function display(e)
    {
        if(e == "1")
        {
            document.getElementById("options").style.display = "none";
        }
        else
        {
            document.getElementById("options").style.display = "";
        }

    }
    </script>




<div id="page-wrap">
    <div id="main-wrap">
        <div class="boxShadow">
            <div class="foundation" id="addQuestion">
                <div class="row">
                    <h2>添加问题</h2>
                    <hr/>
                </div>
                <div class="row">
                    <table id="questionTable">
                        <thead>
                        <tr>
                            <th width="300px">题目</th>
                            <th width="300px">题型</th>
                            <th width="300px">题目内容</th>
                        </tr>
                        </thead>
                        <tbody>

                        </tbody>
                    </table>
                </div>
                <div class="row">
                    <select id="select" onchange="setDisplay()">
                        <option value ="1">标签题</option>
                        <option value ="2">选择题</option>
                    </select>
                </div>

                <div id="options" style="display:none;" class="row">
                    <p>
                        请输入选择题题目
                    </p>
                    <input type="text" name="text2" id="title">
                    <p>
                        请输入选项，最大6个，最小1个
                    </p>
                    <table id="option">
                        <tbody>
                            <tr>
                                <td>
                                    <input type="text"  id="option1" width="80">
                                </td>
                                <td>
                                    <input type="text"  id="option2" width="80">
                                </td>
                                <td>
                                    <input type="text"  id="option3" width="80">
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <input type="text"  id="option4" width="80">
                                </td>
                                <td>
                                    <input type="text"  id="option5" width="80">
                                </td>
                                <td>
                                    <input type="text"  id="option6" width="80">
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="row">
                    <input type="button" value="添加问题" id="addProblem"  class="button large" onclick="CreateQuestion()">

                    <input type="button" value="发布任务" id="PublishProblem"  class="button large" onclick="Publish()" url="{:U('emomp3/Index/newtaskstep1')}" audioid="{$_GET['audioid']}">
                </div>
                <div class="row">
                    <div class="large-12 columns">
                        <div class="page">
                            {$page['html']}
                        </div>
                    </div>
                </div>
                <div class="row">
                    &nbsp;
                </div>
            </div>
        </div>
    </div>
</div>

<include file="../Public/public_footer" />